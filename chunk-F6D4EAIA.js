import{a as M}from"./chunk-65DODENQ.js";import{a as U}from"./chunk-HSY23XSR.js";import{b as C,d as h,e as D,f as T,g as y,h as I,q as k,s as S}from"./chunk-OAJHFRGD.js";import{A as E,B as w,Ba as m,Ca as c,Da as s,F as x,L as z,La as V,Na as B,O as d,U as _,Xa as W,Y as A,ab as q,bb as j,eb as G,fa as v,ga as e,gb as R,ha as t,ia as P,ma as N,na as u,oa as b,xa as r,ya as f,z as p,za as O}from"./chunk-4YEZQ5FG.js";import"./chunk-KAT7YFEL.js";var L=class g{cerrar=new x;clienteService=p(M);nombreNegocio="";nombreDueno="";telefono="";direccion="";zona="";email="";cuit="";guardar(){let a={nombreNegocio:this.nombreNegocio,nombreDueno:this.nombreDueno,telefono:this.telefono,direccion:this.direccion,zona:this.zona,email:this.email,cuit:this.cuit};this.clienteService.agregarCliente(a).subscribe({next:()=>{this.clienteService.cargarClientes(),this.cerrar.emit()},error:o=>console.error(o)})}cerrarModal(){this.cerrar.emit()}static \u0275fac=function(o){return new(o||g)};static \u0275cmp=_({type:g,selectors:[["app-agregar-cliente"]],outputs:{cerrar:"cerrar"},decls:38,vars:7,consts:[[1,"overlay",3,"click"],[1,"modal-card"],[1,"text-center","mb-3"],[3,"ngSubmit"],[1,"mb-2"],["type","text","name","nombreNegocio","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","nombreDueno",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","telefono",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","direccion",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","zona",1,"form-control",3,"ngModelChange","ngModel"],["type","email","name","email",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","cuit","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end","mt-3"],["type","button",1,"btn","btn-secondary","me-2",3,"click"],["type","submit",1,"btn","btn-success"]],template:function(o,i){o&1&&(e(0,"div",0),u("click",function(){return i.cerrarModal()}),t(),e(1,"div",1)(2,"h3",2),r(3,"Agregar Cliente"),t(),e(4,"form",3),u("ngSubmit",function(){return i.guardar()}),e(5,"div",4)(6,"label"),r(7,"Nombre del negocio"),t(),e(8,"input",5),s("ngModelChange",function(n){return c(i.nombreNegocio,n)||(i.nombreNegocio=n),n}),t()(),e(9,"div",4)(10,"label"),r(11,"Nombre del due\xF1o"),t(),e(12,"input",6),s("ngModelChange",function(n){return c(i.nombreDueno,n)||(i.nombreDueno=n),n}),t()(),e(13,"div",4)(14,"label"),r(15,"Tel\xE9fono"),t(),e(16,"input",7),s("ngModelChange",function(n){return c(i.telefono,n)||(i.telefono=n),n}),t()(),e(17,"div",4)(18,"label"),r(19,"Direcci\xF3n"),t(),e(20,"input",8),s("ngModelChange",function(n){return c(i.direccion,n)||(i.direccion=n),n}),t()(),e(21,"div",4)(22,"label"),r(23,"Zona"),t(),e(24,"input",9),s("ngModelChange",function(n){return c(i.zona,n)||(i.zona=n),n}),t()(),e(25,"div",4)(26,"label"),r(27,"Email"),t(),e(28,"input",10),s("ngModelChange",function(n){return c(i.email,n)||(i.email=n),n}),t()(),e(29,"div",4)(30,"label"),r(31,"CUIT"),t(),e(32,"input",11),s("ngModelChange",function(n){return c(i.cuit,n)||(i.cuit=n),n}),t()(),e(33,"div",12)(34,"button",13),u("click",function(){return i.cerrarModal()}),r(35,"Cancelar"),t(),e(36,"button",14),r(37,"Guardar"),t()()()()),o&2&&(d(8),m("ngModel",i.nombreNegocio),d(4),m("ngModel",i.nombreDueno),d(4),m("ngModel",i.telefono),d(4),m("ngModel",i.direccion),d(4),m("ngModel",i.zona),d(4),m("ngModel",i.email),d(4),m("ngModel",i.cuit))},dependencies:[S,I,C,h,D,k,y,T],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);z-index:10}.modal-card[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:420px;background:#fff;padding:20px;border-radius:15px;z-index:20}"]})};var F=class g{clienteId;cerrar=new x;clienteService=p(M);cdr=p(W);nombreNegocio="";nombreDueno="";telefono="";direccion="";zona="";email="";cuit="";ngOnChanges(a){a.clienteId&&this.clienteId&&this.cargarCliente()}cargarCliente(){this.clienteService.obtenerClientePorId(this.clienteId).subscribe({next:a=>{this.nombreNegocio=a.nombreNegocio,this.nombreDueno=a.nombreDueno??"",this.telefono=a.telefono??"",this.direccion=a.direccion??"",this.zona=a.zona??"",this.email=a.email??"",this.cuit=a.cuit,this.cdr.detectChanges()},error:a=>console.error(a)})}guardar(){let a={nombreNegocio:this.nombreNegocio,nombreDueno:this.nombreDueno,telefono:this.telefono,direccion:this.direccion,zona:this.zona,email:this.email,cuit:this.cuit};this.clienteService.editarCliente(this.clienteId,a).subscribe({next:()=>{this.clienteService.cargarClientes(),this.cerrar.emit()},error:o=>console.error("Error al editar:",o)})}cerrarModal(){this.cerrar.emit()}static \u0275fac=function(o){return new(o||g)};static \u0275cmp=_({type:g,selectors:[["app-editar-cliente"]],inputs:{clienteId:"clienteId"},outputs:{cerrar:"cerrar"},features:[z],decls:38,vars:7,consts:[[1,"overlay",3,"click"],[1,"modal-card"],[1,"text-center","mb-3"],[3,"ngSubmit"],[1,"mb-2"],["type","text","name","nombreNegocio","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","nombreDueno",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","telefono",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","direccion",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","zona",1,"form-control",3,"ngModelChange","ngModel"],["type","email","name","email",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","cuit","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end","mt-3"],["type","button",1,"btn","btn-secondary","me-2",3,"click"],["type","submit",1,"btn","btn-primary"]],template:function(o,i){o&1&&(e(0,"div",0),u("click",function(){return i.cerrarModal()}),t(),e(1,"div",1)(2,"h3",2),r(3,"Editar Cliente"),t(),e(4,"form",3),u("ngSubmit",function(){return i.guardar()}),e(5,"div",4)(6,"label"),r(7,"Nombre del negocio"),t(),e(8,"input",5),s("ngModelChange",function(n){return c(i.nombreNegocio,n)||(i.nombreNegocio=n),n}),t()(),e(9,"div",4)(10,"label"),r(11,"Nombre del due\xF1o"),t(),e(12,"input",6),s("ngModelChange",function(n){return c(i.nombreDueno,n)||(i.nombreDueno=n),n}),t()(),e(13,"div",4)(14,"label"),r(15,"Tel\xE9fono"),t(),e(16,"input",7),s("ngModelChange",function(n){return c(i.telefono,n)||(i.telefono=n),n}),t()(),e(17,"div",4)(18,"label"),r(19,"Direcci\xF3n"),t(),e(20,"input",8),s("ngModelChange",function(n){return c(i.direccion,n)||(i.direccion=n),n}),t()(),e(21,"div",4)(22,"label"),r(23,"Zona"),t(),e(24,"input",9),s("ngModelChange",function(n){return c(i.zona,n)||(i.zona=n),n}),t()(),e(25,"div",4)(26,"label"),r(27,"Email"),t(),e(28,"input",10),s("ngModelChange",function(n){return c(i.email,n)||(i.email=n),n}),t()(),e(29,"div",4)(30,"label"),r(31,"CUIT"),t(),e(32,"input",11),s("ngModelChange",function(n){return c(i.cuit,n)||(i.cuit=n),n}),t()(),e(33,"div",12)(34,"button",13),u("click",function(){return i.cerrarModal()}),r(35,"Cancelar"),t(),e(36,"button",14),r(37,"Guardar cambios"),t()()()()),o&2&&(d(8),m("ngModel",i.nombreNegocio),d(4),m("ngModel",i.nombreDueno),d(4),m("ngModel",i.telefono),d(4),m("ngModel",i.direccion),d(4),m("ngModel",i.zona),d(4),m("ngModel",i.email),d(4),m("ngModel",i.cuit))},dependencies:[S,I,C,h,D,k,y,T],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);z-index:10}.modal-card[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:420px;background:#fff;padding:20px;border-radius:15px;z-index:20}"]})};function Q(g,a){if(g&1){let o=N();e(0,"tr")(1,"td"),r(2),t(),e(3,"td"),r(4),t(),e(5,"td"),r(6),t(),e(7,"td"),r(8),t(),e(9,"td"),r(10),t(),e(11,"td"),r(12),t(),e(13,"td"),r(14),t(),e(15,"td",16)(16,"button",17),u("click",function(){let l=E(o).$implicit,n=b();return w(n.editar(l.id))}),r(17,"Editar"),t(),e(18,"button",18),u("click",function(){let l=E(o).$implicit,n=b();return w(n.eliminar(l.id))}),r(19,"Eliminar"),t()()()}if(g&2){let o=a.$implicit;d(2),f(o.nombreNegocio),d(2),f(o.nombreDueno),d(2),f(o.telefono),d(2),f(o.direccion),d(2),f(o.zona),d(2),f(o.email),d(2),f(o.cuit)}}function X(g,a){if(g&1){let o=N();e(0,"app-agregar-cliente",19),u("cerrar",function(){E(o);let l=b();return w(l.cerrarAgregar())}),t()}}function Y(g,a){if(g&1){let o=N();e(0,"app-editar-cliente",20),u("cerrar",function(){E(o);let l=b();return w(l.cerrarEditar())}),t()}if(g&2){let o=b();v("clienteId",o.clienteSeleccionadoId)}}var K=class g{clienteService=p(M);cdr=p(W);clientes$=this.clienteService.clientes$;clientesOriginal=[];clientesFiltrados=[];busqueda="";mostrarAgregar=!1;mostrarEditar=!1;clienteSeleccionadoId=null;hoy=new Date;ngOnInit(){this.clientes$.subscribe(a=>{this.clientesOriginal=[...a],this.clientesFiltrados=[...a],this.cdr.markForCheck()}),this.clienteService.cargarClientes()}agregarNuevo(){this.mostrarAgregar=!0}cerrarAgregar(){this.mostrarAgregar=!1}editar(a){this.clienteSeleccionadoId=a,this.mostrarEditar=!0}cerrarEditar(){this.mostrarEditar=!1,this.clienteSeleccionadoId=null}eliminar(a){confirm("\xBFDesea eliminar este cliente?")&&this.clienteService.eliminarCliente(a).subscribe({next:()=>this.clienteService.cargarClientes(),error:o=>console.error(o)})}actualizarFiltro(){let a=this.busqueda.trim().toLowerCase();if(!a){this.clientesFiltrados=[...this.clientesOriginal];return}this.clientesFiltrados=this.clientesOriginal.filter(o=>o.nombreNegocio.toLowerCase().includes(a)||o.nombreDueno?.toLowerCase().includes(a)||o.cuit.includes(a))}static \u0275fac=function(o){return new(o||g)};static \u0275cmp=_({type:g,selectors:[["app-listar-clientes"]],decls:39,vars:8,consts:[[1,"container","mt-4","mb-4"],[1,"text-center","mb-3"],["src","assets/img/lisemma-logo.png","alt","Lissema",1,"logo"],[1,"text-center","text-muted"],[1,"text-center","titulo","mb-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"btn","btn-success",3,"click"],[1,"mb-3"],["type","text","placeholder","Buscar cliente...",1,"form-control",3,"ngModelChange","ngModel"],[1,"card","shadow"],[1,"card-body"],[1,"table","table-striped","table-hover"],[1,"table-light"],[4,"ngFor","ngForOf"],[3,"cerrar",4,"ngIf"],[3,"clienteId","cerrar",4,"ngIf"],[1,"d-flex","gap-1","justify-content-center","flex-wrap"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[3,"cerrar"],[3,"cerrar","clienteId"]],template:function(o,i){o&1&&(P(0,"app-header"),e(1,"div",0)(2,"div",1),P(3,"img",2),t(),e(4,"p",3),r(5),V(6,"date"),t(),e(7,"h2",4),r(8,"Listado de Clientes"),t(),e(9,"div",5)(10,"button",6),u("click",function(){return i.agregarNuevo()}),r(11,"+ Agregar Cliente"),t()(),e(12,"div",7)(13,"input",8),s("ngModelChange",function(n){return c(i.busqueda,n)||(i.busqueda=n),n}),u("ngModelChange",function(){return i.actualizarFiltro()}),t()(),e(14,"div",9)(15,"div",10)(16,"table",11)(17,"thead",12)(18,"tr")(19,"th"),r(20,"Negocio"),t(),e(21,"th"),r(22,"Due\xF1o"),t(),e(23,"th"),r(24,"Tel\xE9fono"),t(),e(25,"th"),r(26,"Direcci\xF3n"),t(),e(27,"th"),r(28,"Zona"),t(),e(29,"th"),r(30,"Email"),t(),e(31,"th"),r(32,"CUIT"),t(),e(33,"th"),r(34,"Acciones"),t()()(),e(35,"tbody"),A(36,Q,20,7,"tr",13),t()()()()(),A(37,X,1,0,"app-agregar-cliente",14)(38,Y,1,1,"app-editar-cliente",15)),o&2&&(d(5),O(" Fecha: ",B(6,5,i.hoy,"dd/MM/yyyy")," "),d(8),m("ngModel",i.busqueda),d(23),v("ngForOf",i.clientesFiltrados),d(),v("ngIf",i.mostrarAgregar),d(),v("ngIf",i.mostrarEditar))},dependencies:[R,q,j,S,C,h,y,U,L,F,G],encapsulation:2})};export{K as ListarClientes};
