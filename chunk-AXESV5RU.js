import{b as W,d as R,e as D,f as T,g as L,h as P,i as I,q as N,s as B}from"./chunk-OAJHFRGD.js";import{Ba as d,Ca as s,Da as m,O as r,U as b,Xa as C,Y as u,bb as M,fa as c,ga as i,gb as S,ha as n,ia as h,na as _,nb as E,oa as w,ub as v,xa as o,z as f,za as y}from"./chunk-4YEZQ5FG.js";import"./chunk-KAT7YFEL.js";function q(a,g){a&1&&(i(0,"div",25),o(1," \u{1F4DB} Email inv\xE1lido "),n())}function j(a,g){a&1&&(i(0,"div",26),o(1," \u{1F4DB} Debe tener 8 caracteres y 1 car\xE1cter especial "),n())}function V(a,g){a&1&&(i(0,"div",26),o(1," \u{1F4DB} Las contrase\xF1as no coinciden "),n())}function A(a,g){if(a&1&&(i(0,"div",27),o(1),n()),a&2){let p=w();r(),y(" ",p.mensajeError," ")}}var k=class a{router=f(E);authService=f(v);cdr=f(C);nombre="";apellido="";email="";dni=null;telefono="";direccion="";zona="";password="";passwordConfirmar="";mensajeError="";get emailValido(){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)}get passwordValida(){return/^(?=.*[!@#$%^&*()_+\-[\]{};':"\\|,.<>\/?]).{8,}$/.test(this.password)}get passwordsCoinciden(){return this.password===this.passwordConfirmar&&this.password.length>0}registrarse(){if(!this.emailValido){this.mensajeError="El email no es v\xE1lido";return}if(!this.passwordValida){this.mensajeError="La contrase\xF1a debe tener al menos 8 caracteres y un s\xEDmbolo";return}if(!this.passwordsCoinciden){this.mensajeError="Las contrase\xF1as no coinciden";return}let g={nombre:this.nombre,apellido:this.apellido,email:this.email,dni:this.dni?.toString()??"",telefono:this.telefono,direccion:this.direccion,zona:this.zona,password:this.password,tipoUsuarioId:1};this.authService.register(g).subscribe({next:()=>this.irALogin(),error:p=>{this.mensajeError=p.error?.message||"Error al registrar usuario",this.cdr.detectChanges()}})}irALogin(){this.router.navigate(["/login"],{queryParams:{registrado:"ok"}})}irALogin2(){this.router.navigate(["/login"])}static \u0275fac=function(p){return new(p||a)};static \u0275cmp=b({type:a,selectors:[["app-registro"]],decls:56,vars:13,consts:[[1,"container","mt-3","mb-4"],[1,"row","justify-content-center"],[1,"col-md-6","col-lg-5"],[1,"card","shadow"],[1,"card-body","p-4"],[1,"text-center","mb-1"],["src","assets/img/lisemma-logo.png","alt","Lissema",1,"logo"],[1,"text-center","mb-4","titulo"],["ngModelOptions","{ updateOn: 'input' }"],[1,"mb-3"],[1,"form-label"],["type","text","name","nombre","placeholder","Tu nombre","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","apellido","placeholder","Tu apellido","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","email","name","email","placeholder","Tu email","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger small",4,"ngIf"],["type","number","name","dni","placeholder","Tu dni","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","telefono","placeholder","N\xFAmero de tel\xE9fono","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","direccion","placeholder","Domicilio","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","zona","placeholder","Ej: Oeste / Sur / Centro","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","Crea una contrase\xF1a segura","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger small mb-3",4,"ngIf"],["type","password","name","passwordConfirmar","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-primary","w-100","boton",3,"click"],["type","button",1,"btn","btn-primary","w-100","botonSecundario",3,"click"],["class","login-error mt-3",4,"ngIf"],[1,"text-danger","small"],[1,"text-danger","small","mb-3"],[1,"login-error","mt-3"]],template:function(p,e){p&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),h(6,"img",6),n(),i(7,"h3",7),o(8,"Crear cuenta"),n(),i(9,"form",8)(10,"div",9)(11,"label",10),o(12,"Nombre"),n(),i(13,"input",11),m("ngModelChange",function(t){return s(e.nombre,t)||(e.nombre=t),t}),n()(),i(14,"div",9)(15,"label",10),o(16,"Apellido"),n(),i(17,"input",12),m("ngModelChange",function(t){return s(e.apellido,t)||(e.apellido=t),t}),n()(),i(18,"div",9)(19,"label",10),o(20,"Email"),n(),i(21,"input",13),m("ngModelChange",function(t){return s(e.email,t)||(e.email=t),t}),n()(),u(22,q,2,0,"div",14),i(23,"div",9)(24,"label",10),o(25,"DNI"),n(),i(26,"input",15),m("ngModelChange",function(t){return s(e.dni,t)||(e.dni=t),t}),n()(),i(27,"div",9)(28,"label",10),o(29,"Tel\xE9fono"),n(),i(30,"input",16),m("ngModelChange",function(t){return s(e.telefono,t)||(e.telefono=t),t}),n()(),i(31,"div",9)(32,"label",10),o(33,"Direcci\xF3n"),n(),i(34,"input",17),m("ngModelChange",function(t){return s(e.direccion,t)||(e.direccion=t),t}),n()(),i(35,"div",9)(36,"label",10),o(37,"Zona"),n(),i(38,"input",18),m("ngModelChange",function(t){return s(e.zona,t)||(e.zona=t),t}),n()(),i(39,"div",9)(40,"label",10),o(41,"Contrase\xF1a"),n(),i(42,"input",19),m("ngModelChange",function(t){return s(e.password,t)||(e.password=t),t}),n()(),u(43,j,2,0,"div",20),i(44,"div",9)(45,"label",10),o(46,"Confirmar contrase\xF1a"),n(),i(47,"input",21),m("ngModelChange",function(t){return s(e.passwordConfirmar,t)||(e.passwordConfirmar=t),t}),n()(),u(48,V,2,0,"div",20),i(49,"button",22),_("click",function(){return e.registrarse()}),o(50," Registrarme "),n(),h(51,"br")(52,"br"),i(53,"button",23),_("click",function(){return e.irALogin2()}),o(54," Ir a Login "),n()(),u(55,A,2,1,"div",24),n()()()()()),p&2&&(r(13),d("ngModel",e.nombre),r(4),d("ngModel",e.apellido),r(4),d("ngModel",e.email),r(),c("ngIf",e.email&&!e.emailValido),r(4),d("ngModel",e.dni),r(4),d("ngModel",e.telefono),r(4),d("ngModel",e.direccion),r(4),d("ngModel",e.zona),r(4),d("ngModel",e.password),r(),c("ngIf",e.password&&!e.passwordValida),r(4),d("ngModel",e.passwordConfirmar),r(),c("ngIf",e.passwordConfirmar&&!e.passwordsCoinciden),r(7),c("ngIf",e.mensajeError))},dependencies:[B,P,W,I,R,D,N,L,T,S,M],styles:[".titulo[_ngcontent-%COMP%]{color:#202020;font-weight:700}.boton[_ngcontent-%COMP%]{background-color:#38b6ff;border-color:#38b6ff;font-weight:600}.boton[_ngcontent-%COMP%]:hover{background-color:#1aa8ff;border-color:#1aa8ff}.botonSecundario[_ngcontent-%COMP%]{background-color:#f90000;border-color:#f90000;font-weight:600}.botonSecundario[_ngcontent-%COMP%]:hover{background-color:#e60000;border-color:#e60000}.form-control[_ngcontent-%COMP%]:focus{border-color:#38b6ff!important;box-shadow:0 0 0 .2rem #38b6ff40!important}"]})};export{k as Registro};
