import{H as d,I as g,U as v,g as s,hb as C,ia as A,ib as R,jb as T,kb as I,m,mb as L,nb as k,q as h,qb as H,rb as w,tb as y,ub as p,z as r}from"./chunk-4YEZQ5FG.js";import"./chunk-KAT7YFEL.js";var E=(t,e)=>{let o=r(p),c=r(R),u=o.getAccessToken(),f=t;return u&&(f=t.clone({setHeaders:{Authorization:`Bearer ${u}`}})),e(f).pipe(m(i=>i.status===401&&i.error?.message==="TOKEN_EXPIRED"?c.post(`${y.apiUrl}/usuarios/refresh`,{refreshToken:o.getRefreshToken()}).pipe(h(l=>{o.saveAccessToken(l.accessToken);let D=t.clone({setHeaders:{Authorization:`Bearer ${l.accessToken}`}});return e(D)}),m(()=>(o.logout(),s(()=>i)))):s(()=>i)))};var n=()=>{let t=r(p),e=r(k);return t.isLoggedIn()?!0:(e.navigate(["/login"]),!1)};var b=[{path:"",redirectTo:"registro",pathMatch:"full"},{path:"registro",loadComponent:()=>import("./chunk-AXESV5RU.js").then(t=>t.Registro)},{path:"login",loadComponent:()=>import("./chunk-DPIXTUQ2.js").then(t=>t.Login)},{path:"productos",canActivate:[n],loadComponent:()=>import("./chunk-IXPKMBEZ.js").then(t=>t.Productos)},{path:"clientes",canActivate:[n],loadComponent:()=>import("./chunk-F6D4EAIA.js").then(t=>t.ListarClientes)},{path:"ventas",canActivate:[n],loadComponent:()=>import("./chunk-EGNRSNWL.js").then(t=>t.ListarVentas)},{path:"reportes",canActivate:[n],loadComponent:()=>import("./chunk-IFQPXAWT.js").then(t=>t.ListarReportes)},{path:"notas-credito",canActivate:[n],loadComponent:()=>import("./chunk-SH5NQNE7.js").then(t=>t.ListarNotasCredito)}];var x={providers:[d(),H(b,w()),T(I([E]))]};var a=class t{title=g("lissema-app");static \u0275fac=function(o){return new(o||t)};static \u0275cmp=v({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(o,c){o&1&&A(0,"router-outlet")},dependencies:[L],encapsulation:2})};C(a,x).catch(t=>console.error(t));
